<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>Docs for page AWLUtilities.php</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
						<script src="../../media/lib/classTree.js"></script>
												<script language="javascript" type="text/javascript">
				var imgPlus = new Image();
				var imgMinus = new Image();
				imgPlus.src = "../../media/images/plus.png";
				imgMinus.src = "../../media/images/minus.png";
				
				function showNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgMinus.src;
					oTable.style.display = "block";
				}
				
				function hideNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgPlus.src;
					oTable.style.display = "none";
				}
				
				function nodeIsVisible(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
									break;
							}
					return (oTable && oTable.style.display == "block");
				}
				
				function toggleNodeVisibility(Node){
					if (nodeIsVisible(Node)){
						hideNode(Node);
					}else{
						showNode(Node);
					}
				}
			</script>
					</head>
		<body>
			<div class="page-body">			
<h2 class="file-name"><img src="../../media/images/Page_logo.png" alt="File" style="vertical-align: middle">/AWLUtilities.php</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
									<a href="#sec-includes">Includes</a>
			|											<a href="#sec-functions">Functions</a>
			</div>
	<div class="info-box-body">	
		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Utility functions of a general nature which are used by  most AWL library classes.</p>
	<ul class="tags">
				<li><span class="field">author:</span> Andrew McMillan &lt;<a href="mailto:andrew@catalyst.net.nz">andrew@catalyst.net.nz</a>&gt;</li>
				<li><span class="field">copyright:</span> Catalyst IT Ltd</li>
				<li><span class="field">license:</span> <a href="http://gnu.org/copyleft/gpl.html">GNU GPL v2</a></li>
			</ul>
		
			</div>
</div>
		

	<a name="sec-includes"></a>	
	<div class="info-box">
		<div class="info-box-title">Includes</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Includes</span>
			|													<a href="#sec-functions">Functions</a>
					</div>
		<div class="info-box-body">	
			<a name="_Translation_php"><!-- --></a>
<div class="oddrow">
	
	<div>
		<img src="../../media/images/Page.png" alt=" " />
		<span class="include-title">
			<span class="include-type">require_once</span>
			(<span class="include-name"><a href="../../awl/Translation/_Translation.php.html">"Translation.php"</a></span>)
			(line <span class="line-number">271</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
</div>
		</div>
	</div>
	
	
	
	<a name="sec-functions"></a>	
	<div class="info-box">
		<div class="info-box-title">Functions</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-includes">Includes</a>
				|												<span class="disabled">Functions</span>
		</div>
		<div class="info-box-body">	
			<a name="functionapache_request_headers" id="functionapache_request_headers"><!-- --></a>
<div class="evenrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">apache_request_headers</span> (line <span class="line-number">63</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Forward compatibility so we can use the non-deprecated name in PHP4</p>
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			apache_request_headers
		</span>
				()
			</div>

		
	
</div>
<a name="functiondbg_error_log" id="functiondbg_error_log"><!-- --></a>
<div class="oddrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">dbg_error_log</span> (line <span class="line-number">27</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Writes a debug message into the error log using printf syntax.  If the first  parameter is &quot;ERROR&quot; then the message will _always_ be logged.</p>
<p class="description"><p>Otherwise, the first parameter is a &quot;component&quot; name, and will only be logged  if $c-&gt;dbg[&quot;component&quot;] is set to some non-null value.</p><p>If you want to see every log message then $c-&gt;dbg[&quot;ALL&quot;] can be set, to  override the debugging status of the individual components.</p></p>
	<ul class="tags">
				<li><span class="field">var:</span> The component to identify itself, or &quot;ERROR&quot;, or &quot;LOG:component&quot;</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			dbg_error_log
		</span>
				()
			</div>

		
	
</div>
<a name="functiondbg_log_array" id="functiondbg_log_array"><!-- --></a>
<div class="evenrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">dbg_log_array</span> (line <span class="line-number">79</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Function to dump an array to the error log, possibly recursively</p>
	<ul class="tags">
				<li><span class="field">var:</span> Which component should this log message identify itself from</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			dbg_log_array
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$component</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$name</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$arr</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$recursive</span> = <span class="var-default">false</span>])
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$component</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$name</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$arr</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$recursive</span>			</li>
				</ul>
		
	
</div>
<a name="functionquoted_printable_encode" id="functionquoted_printable_encode"><!-- --></a>
<div class="oddrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">quoted_printable_encode</span> (line <span class="line-number">289</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Process a string to fit the requirements of RFC2045 section 6.7.  Note that  this works, but replaces more characters than the minimum set. For readability  the spaces aren't encoded as =20 though.</p>
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			quoted_printable_encode
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$string</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$string</span>			</li>
				</ul>
		
	
</div>
<a name="functionreplace_uri_params" id="functionreplace_uri_params"><!-- --></a>
<div class="evenrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">replace_uri_params</span> (line <span class="line-number">200</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Given a URL (presumably the current one) and a parameter, replace the value of parameter,  extending the URL as necessary if the parameter is not already there.</p>
	<ul class="tags">
				<li><span class="field">return:</span> The URI with the replacements done.</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			replace_uri_params
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$uri</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$replacements</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$uri</span><span class="var-description">: The URI we will be replacing parameters in.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$replacements</span><span class="var-description">: An array of replacement pairs array( &quot;replace_this&quot; =&gt; &quot;with this&quot; )</span>			</li>
				</ul>
		
	
</div>
<a name="functionsession_salted_md5" id="functionsession_salted_md5"><!-- --></a>
<div class="oddrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">session_salted_md5</span> (line <span class="line-number">106</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Make a salted MD5 string, given a string and (possibly) a salt.</p>
<p class="description"><p>If no salt is supplied we will generate a random one.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> The salt, a * and the MD5 of the salted string, as in SALT*SALTEDHASH</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			session_salted_md5
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$instr</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$salt</span> = <span class="var-default">&amp;quot;&amp;quot;</span>])
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$instr</span><span class="var-description">: The string to be salted and MD5'd</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$salt</span><span class="var-description">: Some salt to sprinkle into the string to be MD5'd so we don't get the same PW always hashing to the same value.</span>			</li>
				</ul>
		
	
</div>
<a name="functionsession_salted_sha1" id="functionsession_salted_sha1"><!-- --></a>
<div class="evenrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">session_salted_sha1</span> (line <span class="line-number">129</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Make a salted SHA1 string, given a string and (possibly) a salt.  PHP5 only (although it  could be made to work on PHP4 (@see http://www.openldap.org/faq/data/cache/347.html). The  algorithm used here is compatible with OpenLDAP so passwords generated through this function  should be able to be migrated to OpenLDAP by using the part following the second '*', i.e.</p>
<p class="description"><p>the '{SSHA}....' part.</p><p>If no salt is supplied we will generate a random one.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> A *, the salt, a * and the SHA1 of the salted string, as in *SALT*SALTEDHASH</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			session_salted_sha1
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$instr</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$salt</span> = <span class="var-default">&amp;quot;&amp;quot;</span>])
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$instr</span><span class="var-description">: The string to be salted and SHA1'd</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$salt</span><span class="var-description">: Some salt to sprinkle into the string to be SHA1'd so we don't get the same PW always hashing to the same value.</span>			</li>
				</ul>
		
	
</div>
<a name="functionsession_validate_password" id="functionsession_validate_password"><!-- --></a>
<div class="oddrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">session_validate_password</span> (line <span class="line-number">144</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks what a user entered against the actual password on their account.</p>
	<ul class="tags">
				<li><span class="field">return:</span> Whether or not the users attempt matches what is already on file.</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			session_validate_password
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$they_sent</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$we_have</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$they_sent</span><span class="var-description">: What the user entered.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$we_have</span><span class="var-description">: What we have in the database as their password.  Which may (or may not) be a salted MD5.</span>			</li>
				</ul>
		
	
</div>
<a name="functionuuid" id="functionuuid"><!-- --></a>
<div class="evenrow">
	
	<div>
		<img src="../../media/images/Function.png" />
		<span class="method-title">uuid</span> (line <span class="line-number">253</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Generates a Universally Unique IDentifier, version 4.</p>
<p class="description"><p>RFC 4122 (http://www.ietf.org/rfc/rfc4122.txt) defines a special type of Globally  Unique IDentifiers (GUID), as well as several methods for producing them. One  such method, described in section 4.4, is based on truly random or pseudo-random  number generators, and is therefore implementable in a language like PHP.</p><p>We choose to produce pseudo-random numbers with the Mersenne Twister, and to always  limit single generated numbers to 16 bits (ie. the decimal value 65535). That is  because, even on 32-bit systems, PHP's RAND_MAX will often be the maximum *signed*  value, with only the equivalent of 31 significant bits. Producing two 16-bit random  numbers to make up a 32-bit one is less efficient, but guarantees that all 32 bits  are random.</p><p>The algorithm for version 4 UUIDs (ie. those based on random number generators)  states that all 128 bits separated into the various fields (32 bits, 16 bits, 16 bits,  8 bits and 8 bits, 48 bits) should be random, except : (a) the version number should  be the last 4 bits in the 3rd field, and (b) bits 6 and 7 of the 4th field should  be 01. We try to conform to that definition as efficiently as possible, generating  smaller values where possible, and minimizing the number of base conversions.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> A UUID, made up of 32 hex digits and 4 hyphens.</li>
				<li><span class="field">author:</span> David Holmes &lt;<a href="mailto:dholmes@cfdsoftware.net">dholmes@cfdsoftware.net</a>&gt;</li>
				<li><span class="field">copyright:</span> Copyright (c) CFD Labs, 2006. This function may be used freely for               any purpose ; it is distributed without any form of warranty whatsoever.</li>
			</ul>
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			uuid
		</span>
				()
			</div>

		
	
</div>
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Tue, 18 Nov 2008 18:08:52 +1300 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.2</a>
	</p>
	</div></body>
</html>